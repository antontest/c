cscope 15 $HOME/working/program/c/geteth -q 0000000058 0000001672
	@geteth.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

4 
	~<uni°d.h
>

5 
	~<f˙é.h
>

6 
	~<sys/ty≥s.h
>

7 
	~<sys/°©.h
>

8 
	~<sig«l.h
>

9 
	~<±hªad.h
>

10 
	~<£m≠h‹e.h
>

11 
	~<°dboﬁ.h
>

12 
	~<sys/sysöfo.h
>

13 
	~<sys/î∫o.h
>

14 
	~<sys/waô.h
>

15 
	~<sys/£À˘.h
>

16 
	~<gë›t.h
>

17 
	~<time.h
>

18 
	~<sys/sockë.h
>

19 
	~<√töë/ö.h
>

20 
	~<°rög.h
>

21 
	~<√t/if.h
>

22 
	~<sys/io˘l.h
>

23 
	~<¨∑/öë.h
>

25 
	$gëëh
()

27 
i‰eq
 
i‰
;

28 
ifc⁄f
 
ifc
;

29 
buf
[2048];

31 
sock
 = 
	`sockë
(
AF_INET
, 
SOCK_DGRAM
, 
IPPROTO_IP
);

32 i‡(
sock
 == -1) {

33 
	`¥ötf
("socketÉrror\n");

37 
ifc
.
ifc_Àn
 = (
buf
);

38 
ifc
.
ifc_buf
 = 
buf
;

39 i‡(
	`io˘l
(
sock
, 
SIOCGIFCONF
, &
ifc
) == -1)

41 
	`¥ötf
("ioctlÉrror\n");

45 
i‰eq
* 
ô
 = 
ifc
.
ifc_ªq
;

46 
	`¥ötf
("ifc.ifc_À¿%d\n", 
ifc
.
ifc_Àn
);

47 c⁄° 
i‰eq
* c⁄° 
íd
 = 
ô
 + (
ifc
.
ifc_Àn
 / (ifreq));

48 
szMac
[64];

49 
cou¡
 = 0;

50 ; 
ô
 !
íd
; ++it)

52 
	`°r˝y
(
i‰
.
i‰_«me
, 
ô
->ifr_name);

55 i‡(
	`io˘l
(
sock
, 
SIOCGIFFLAGS
, &
i‰
) == 0)

57 i‡(! (
i‰
.
i‰_Êags
 & 
IFF_LOOPBACK
))

59 i‡(
	`io˘l
(
sock
, 
SIOCGIFHWADDR
, &
i‰
) == 0)

61 
cou¡
 ++ ;

62 * 
±r
 ;

63 
±r
 = (*)&
i‰
.
i‰_i‰u
.
i‰u_hwaddr
.
ß_d©a
[0];

64 
	`¢¥ötf
(
szMac
,64,"%02X:%02X:%02X:%02X:%02X:%02X",*
±r
,*(ptr+1),*(ptr+2),*(ptr+3),*(ptr+4),*(ptr+5));

65 
	`¥ötf
("%d,I¡îÁ˚Çamê: %†, Ma¯addªs†: %†\n",
cou¡
,
i‰
.
i‰_«me
,
szMac
);

71 
	`¥ötf
("get mac infoÉrror\n");

75 
	}
}

80 
	$maö
(
agrc
, *
agrv
[])

82 
π
 = 0;

83 
	`gëëh
();

85  
π
;

86 
	}
}

	@
1
.
0
1
9
geteth.c
